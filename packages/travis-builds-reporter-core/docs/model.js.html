<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Contains model used in exporter module
 * @module travis-builds-reporter-core/model
 */

/**
 * Class that holds 2 basic info:
 * &lt;ol>
 * &lt;li>repository (from which builds have been fetched).&lt;/li>
 * &lt;li>builds themselves.&lt;/li>
 * &lt;/ol>
 */
class BuildsModel {
  /**
   * Create the builds model.
   * @param {string} repository - Repository from which builds have been fetched.
   * @param {array} builds - Builds fetched from a CI provider/service.
   */
  constructor(repository, builds) {
    this.repository = repository;
    // use set "property" (validates input) 
    this.Builds = builds;
  }

  /**
   * Get the repository name.
   * @return {string} Repository name
   */
  get Repository() {
    return this.repository;
  }

  /**
   * Set the repository name.
   * @param {string} repository - Repository name
   */
  set Repository(repository) {
    this.repository = repository;
  }

  /**
   * Get the builds list.
   * @return {array} Builds
   */
  get Builds() {
    return this.builds;
  }

  /**
   * Set the builds.
   * @param {array} builds - Builds
   */
  set Builds(builds) {
    if (Array.isArray(builds)) {
      this.builds = builds;
    } else {
      this.builds = [];
    }
  }

  /**
   * "Override" implementation of object's default toJSON().
   * &lt;p>&lt;strong>Gets automatically called by `JSON.stringify(obj);`&lt;/strong>&lt;/p>
   * @return {object} Serialized builds model.
   */
  toJSON() {
    return {
      repository: this.repository,
      builds: this.builds,
      exportedOn: new Date(),
    };
  }
}

/**
 * Deserialization method.
 * @param {string} json - Builds model JSON notation
 * @return {BuildsModel} Deserialzed BuildsModel instance.
 * &lt;strong>For now exportedOn is ignored.&lt;/strong>
 * @throws {Error} Thrown when the given JSON representation of the model is 
 * &lt;i>"corrupt"&lt;/i>: missing the repository or builds properties.
 */
BuildsModel.fromJSONString = (json) => {
  const { repository, builds } = JSON.parse(json);
  const commonError = 'Deserialization failed. Check if your json file has ';
  if (repository == null) {
    throw new Error(`${commonError} the repository field.`);
  }
  if (builds == null) {
    throw new Error(`${commonError} the builds field.`);
  }
  return new BuildsModel(repository, builds);
};

module.exports = BuildsModel;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-travis-builds-reporter-core_client.html">travis-builds-reporter-core/client</a></li><li><a href="module-travis-builds-reporter-core_exporter.html">travis-builds-reporter-core/exporter</a></li><li><a href="module-travis-builds-reporter-core_fetcher.html">travis-builds-reporter-core/fetcher</a></li><li><a href="module-travis-builds-reporter-core_model.html">travis-builds-reporter-core/model</a></li></ul><h3>Classes</h3><ul><li><a href="module-travis-builds-reporter-core_model-BuildsModel.html">BuildsModel</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.4</a> on Thu Aug 17 2017 17:52:41 GMT+0200 (ora legale Europa occidentale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
